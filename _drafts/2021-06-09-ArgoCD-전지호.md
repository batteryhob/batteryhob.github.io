---
layout: post
title:  ì¿ ë²„ë„¤í‹°ìŠ¤ì— GitOpsë„êµ¬ ì„¤ì¹˜í•˜ê¸° (ArgoCD)
date:   2021-06-09 00:00:00 +0900
author: ì „ì§€í˜¸
tags: kubernetes helm gitops mlops
excerpt: 
use_math: false
toc: true
# tags: ìë™ ìˆ˜ì§‘ë˜ëŠ” íƒœê·¸ ë„ì–´ì“°ê¸°ë¡œ êµ¬ë¶„, ë°˜ë“œì‹œ ì†Œë¬¸ìë¡œ ì‚¬ìš©
# excerpt: ë©”ì¸ í™”ë©´ì— ë…¸ì¶œë˜ëŠ” postì˜ description
# use_math : ìˆ˜ì‹ì´ í•„ìš” í•  ê²½ìš°(ìœ— ì²¨ì, ì•„ë«ì²¨ì ë™ì‹œ ì‚¬ìš© ë¶ˆê°€) true | false
# toc : ëª©ì°¨ê°€ í•„ìš” í•  ê²½ìš° true | false
---


# ì¿ ë²„ë„¤í‹°ìŠ¤ì— GitOps ë„êµ¬ ì„¤ì¹˜í•˜ê¸°

> ì¿ ë²„ë„¤í‹°ìŠ¤ì— ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ìë™ ë°°í¬í•´ì£¼ëŠ” CI/CDë¥¼ êµ¬ì¶•í•´ë´…ì‹œë‹¤.

<br/>

## ê°œìš”

<hr/>

<br/>

## argo-cli ì„¤ì¹˜í•˜ê¸°

<hr/>

> argocdì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” cli(ì»¤ë§¨ë“œ ë¼ì¸ ì¸í„°í˜ì´ìŠ¤) ì„¤ì¹˜í•´ë´…ì‹œë‹¤. 
>> í„°ë¯¸ë„ì—ì„œ argocdì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

<br/>

## argoCD ì„¤ì¹˜

<hr/>

> ë³¸ê²©ì ìœ¼ë¡œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•´ë´…ë‹ˆë‹¤.

kubectl ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ì—¬, í´ëŸ¬ìŠ¤í„°ì— ì„¤ì¹˜ê°€ ê°€ëŠ¥í•œ ë…¸ë“œê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

``` shell
kubectl get node
```

argocdê°€ ì„¤ì¹˜ë  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤.

``` shell
kubectl create namespace argocd
```

ìƒì„±í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ê³µì‹ yamlì„ ì´ìš©í•´ ê°€ì¥ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•´ì¤ì‹œë‹¤.

``` shell
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
```

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆëŠ” ì§€ í™•ì¸í•˜ë ¤ë©´, ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` shell
kubectl get pod -n argocd
```

![<u>ì„¤ì¹˜ì¤‘</u>](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/argocd/argocd%EC%84%A4%EC%B9%98%EC%A4%91.JPG)

![<u>ì„¤ì¹˜ì™„ë£Œ</u>](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/argocd/argocd%EC%84%A4%EC%B9%98%EC%99%84%EB%A3%8C.JPG)

<br/>

## argoCD ì´ˆê¸° ì„¤ì •

<hr/>

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë©´, ë¡œë“œë°¸ëŸ°ì„œ ì„¤ì •ì„ í†µí•´ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ í•´ì•¼í•©ë‹ˆë‹¤.

ì•„ë˜ ëª…ë ¹ì–´ëŠ” linuxëª…ë ¹ì–´ ì´ë¯€ë¡œ windowsë¼ë©´ Gitbashì—ì„œ ì…ë ¥í•´ì£¼ì„¸ìš”.

``` shell
kubectl patch svc argocd-server -n argocd -p '{"spec": {"type": "LoadBalancer"}}'
```

![<u>ì™¸ë¶€ì ‘ê·¼</u>](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/argocd/argocd%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%84%9C%EB%85%B8%EC%B6%9C.JPG)

ë¡œë¸Œë°¸ëŸ°ì„œ ì„¤ì •ì´ ë³€ê²½ë˜ì—ˆìœ¼ë©´, 

ë¡œê·¸ì¸ì„ ìœ„í•´ ëœë¤ ì„¤ì •ëœ ìµœì´ˆ ë¹„ë°€ë²ˆí˜¸ì„ í™•ì¸í•´ë´…ì‹œë‹¤.

ì°¸ê³ ë¡œ, ì•„ì´ë””ëŠ” `admin`ìœ¼ë¡œ ê³ ì •ì…ë‹ˆë‹¤.

ì•„ë˜ ëª…ë ¹ì–´ëŠ” linuxëª…ë ¹ì–´ ì´ë¯€ë¡œ windowsë¼ë©´ Gitbashì—ì„œ ì…ë ¥í•´ì£¼ì„¸ìš”.

``` shell
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
```

![<u>ìµœì´ˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</u>](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/argocd/argocd%EC%B5%9C%EC%B4%88%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8%EC%95%8C%EA%B8%B0.JPG)

ì´ì œ ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ì ‘ì†í•´ë´…ì‹œë‹¤.

ë¡œë“œë°¸ëŸ°ì„œ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´, í˜¸ìŠ¤íŠ¸ëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![<u>í˜¸ìŠ¤íŠ¸ í™•ì¸</u>](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/argocd/argocd%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%A3%BC%EC%86%8C%ED%99%95%EC%9D%B8.png)


<br/>

## ì°¸ê³ ë¬¸í—Œ

<hr/>

ë” ìì„¸í•œ ì •ë³´ëŠ” ê³µì‹ ê°€ì´ë“œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

ğŸ‘‰ [<u>argo-cd guide</u>](https://argoproj.github.io/argo-cd/user-guide)