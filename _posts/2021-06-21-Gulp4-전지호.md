---
layout: post
title:  Webpackë³´ë‹¤ ì¢‹ì€ Html ë²ˆë“¤ëŸ¬ Gulp4 ì‹œì‘í•˜ê¸°
date:   2021-06-21 00:00:00 +0900
author: ë°°í„°ë¦¬í˜¸
tags: gulp webpack html frontend
excerpt: ES6 ë¬¸ë²•ê³¼ ë¹„ë™ê¸° ë¬¸ë²•, Image Spriteê¹Œì§€ ê°€ë³ê²Œ ì§€ì›í•˜ëŠ” Gulp4ë¥¼ ì‚¬ìš©í•´ë´…ì‹œë‹¤.
use_math: false
toc: true
# tags: ìë™ ìˆ˜ì§‘ë˜ëŠ” íƒœê·¸ ë„ì–´ì“°ê¸°ë¡œ êµ¬ë¶„, ë°˜ë“œì‹œ ì†Œë¬¸ìë¡œ ì‚¬ìš©
# excerpt: ë©”ì¸ í™”ë©´ì— ë…¸ì¶œë˜ëŠ” postì˜ description
# use_math : ìˆ˜ì‹ì´ í•„ìš” í•  ê²½ìš°(ìœ— ì²¨ì, ì•„ë«ì²¨ì ë™ì‹œ ì‚¬ìš© ë¶ˆê°€) true | false
# toc : ëª©ì°¨ê°€ í•„ìš” í•  ê²½ìš° true | false
---


# Gulp4ìœ¼ë¡œ ë³€ê²½ë˜ë©´ì„œ, ë§ì€ ë¶€ë¶„ì—ì„œ ì‹¤ìš©ì ì¸ ë²ˆë“¤ëŸ¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ™

> ES6 ë¬¸ë²•ê³¼ ë¹„ë™ê¸° ë¬¸ë²•, Image Spriteë¥¼ ì§€ì›í•˜ê¸°ì—, Htmlì„ ì‘ì„±í•˜ê¸°ì— ì•„ì£¼ ê´œì°®ì€ ë„êµ¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.

<br/>

## ì‹œì‘í•˜ê¸° 

<hr/>

ê¸€ë¡œë²Œì— gulp-clië¥¼ ì„¤ì¹˜í•˜ë©´, gulpë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` shell
npm install -global gulp-cli
```

ì‘ì—… í´ë”ì— ìƒì„±í•˜ê³  ë“¤ì–´ê°€ gulpë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

``` shell
npm install gulp --save-dev
```

<br/>

## í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜í•˜ê¸°

<hr/>

### gulp-connect

- gulp-connectëŠ” ì‘ì—… í™˜ê²½ì„ ë¡œì»¬ ë¸Œë¼ìš°ì €ì—ì„œ ë„ì–´ í™•ì¸í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### del

- í´ë”ì•ˆì— ë‚´ìš©ì„ ì‚­ì œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë³´í†µ ìƒˆ ë¹Œë“œì „ì— ìˆ˜í–‰í•©ë‹ˆë‹¤.

ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ gulp-connect(ë¡œì»¬ì„œë²„)ì™€ delì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.

``` shell
npm install --save-dev gulp-connect del
```

<br/>

## gulpfile.js íŒŒì¼ ë§Œë“¤ê¸°

<hr/>

> gulpfileì€ ì–´ë–¤ ì‘ì—… taskë¥¼ ìˆ˜í–‰í•  ê±´ì§€, ê° taskë¥¼ ìˆ˜í–‰í• ê±´ ì§€ ëª…ì‹œí•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.
>> ëª¨ë“  gulp ë™ì‘ì€ ì´ íŒŒì¼ì„ í†µí•´ ìˆ˜í–‰ë©ë‹ˆë‹¤.

gulpfile.jsì„ ì‘ì—…í´ë”ì— ìƒì„±í•©ë‹ˆë‹¤.

gulpfile.jsì•ˆì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤.

``` javascript
//1. í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
const { src, dest, watch, series, parallel } = require('gulp');
const connect = require('gulp-connect');
const del = require('del');

//2. ì‘ì—… ì „ ë°°í¬í´ë” ì§€ìš°ê¸°
async function clean(cb){
    await del('dist/**', { force:true });
    cb()
};

//3. ë¡œì»¬ì„œë²„
function connectServer() {
    connect.server({
        root: './dist',
        livereload: true,
        port: 8001
    });
};

//4. íŒŒì¼ë³€ê²½í™•ì¸
function watchFile() {

};

//5. ì‘ì—…ì‹¤í–‰
exports.default = parallel(
    series(clean, connectServer),
    watchFile
);
```

ê¸°ë³¸ ë™ì‘ì„ í™•ì¸í•˜ê¸° ìœ„í•œ ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.

gulpfile.js íŒŒì¼ì„ í™•ì¸í•´ë³´ë©´ì„œ ì–´ë–»ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•  ì§€ ì‚´í´ë´…ì‹œë‹¤.

ëª¨ë“  taskëŠ” í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¼ë‹¨ 1ë²ˆ ë¶€ë¶„ì—ì„œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬(ì„¤ì¹˜í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬)ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

ê·¸ ë‹¤ìŒ, í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±ëœ 2,3,4ë²ˆ taskë¥¼ ë§¨ ë§ˆì§€ë§‰ 5ë²ˆ task ì—ì„œ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ì²˜ëŸ¼ ì½”ë“œë¥¼ ì‘ì„±í•œ ì‚¬ëŒì´ ì›í•˜ëŠ”ëŒ€ë¡œ ì‘ì—… ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆì–´ì„œ webpackë³´ë‹¤ í›¨ì”¬ ì§ê´€ì ì¸ ì½”ë“œ ì‘ì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

<br/>

### parallel í•¨ìˆ˜

- 5ë²ˆì— í•´ë‹¹í•˜ëŠ” ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ `watchFile`ê³¼ `clean`, `connectServer` í•¨ìˆ˜ëŠ” gulp ë‚´ì¥ í•¨ìˆ˜ì¸ `parallel`ì— ì˜í•´ <u>ë³‘ë ¬ë¡œ ì²˜ë¦¬ë˜ëŠ” ê²ƒ</u>ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### series í•¨ìˆ˜

- 5ë²ˆì— í•´ë‹¹í•˜ëŠ” ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ `watchFile`ê³¼ `clean`, `connectServer` í•¨ìˆ˜ëŠ” gulp ë‚´ì¥ í•¨ìˆ˜ì¸ `series`ì— ì˜í•´ <u>ì°¨ë¡€ëŒ€ë¡œ ì²˜ë¦¬ë˜ëŠ” ê²ƒ</u>ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

## task ìˆ˜í–‰

<hr/>

> gulpëª…ë ¹ì–´ë¥¼ í†µí•´ gulpfile.jsì•ˆì— ëª…ì‹œí•œ ì‘ì—…ë“¤ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.

``` shell
gulp
```

ìœ„ ì˜ˆì‹œì—ì„œëŠ” gulp-connectë¥¼ í†µí•œ ë¡œì»¬ ì„œë²„ ë™ì‘ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

![gulp-connect ì„œë²„ ë™ì‘](https://solution-userstats.s3.ap-northeast-1.amazonaws.com/techblogs/batteryho/gulp/%EB%A1%9C%EC%BB%AC%EC%84%9C%EB%B2%84%EC%88%98%ED%96%89.JPG){: #popup }

<br/>

## ê¸°ë³¸ì ì¸ Htmlì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ” í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±í•´ë´…ì‹œë‹¤.

<hr/>

> Htmlì„ ì‘ì„±í•˜ê¸° ìœ„í•´ ì œê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ ejsì™€ sassë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í™˜ê²½ì„ ì›í•œë‹¤ë©´ ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€ë¡œ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤.

``` shell
npm install --save-dev gulp-sass node-sass gulp-ejs gulp-rename
```

### gulp-sass, node-sass

- sassë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. webpackì— loaderì— í•´ë‹¹í•©ë‹ˆë‹¤.

### gulp-ejs

- ejsë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ  ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. webpackì— loaderì— í•´ë‹¹í•©ë‹ˆë‹¤.

### gulp-rename

- íŒŒì¼ëª…ì„ ë³€ê²½í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ìœ„ ì˜ˆì œì—ì„œëŠ” ejsë¥¼ ë¹Œë“œí•œ ë’¤, htmlíŒŒì¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

gulpfile.jsëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

``` javascript
//1. í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
const { src, dest, watch, series, parallel } = require('gulp');
const connect   = require('gulp-connect');
const del   = require('del');
//ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€
const sass = require('gulp-sass');
sass.compiler = require('node-sass');
const ejs  = require('gulp-ejs');
const rename  = require('gulp-rename');

//2. ì‘ì—… ì „ ë°°í¬í´ë” ì§€ìš°ê¸°
async function clean(cb){
    await del('dist/**', { force:true });
    cb()
};

//3. ì‘ì—…í´ë”
function connectServer() {
    connect.server({
        root: './dist',
        livereload: true,
        port: 8001
    });
};

//4. íŒŒì¼ë³€ê²½í™•ì¸ - ì‘ì—…ì¶”ê°€
function watchFile() {
    watch('./src/scss/**/*.scss', sassTask)
    watch('./src/ejs/*.ejs', ejsTask)
};

//sassíŒŒì¼ì˜ ì‘ì—…
function sassTask() {
    return src('./src/scss/**/*.scss')
    .pipe(sass()) //sassë¡œ íŒŒì‹±
    .pipe(dest('./dist/css')) //cssí´ë”ë¡œ ì´ë™
    .pipe(connect.reload());
}

//ejsíŒŒì¼ì˜ ì‘ì—…
function ejsTask() {
    return src('./src/ejs/*.ejs')
    .pipe(ejs()) //ejsë¡œ íŒŒì‹±
    .pipe(rename({ extname: '.html' })) //í™•ì¥ìë¥¼ htmlë¡œ ìˆ˜ì •
    .pipe(dest('./dist')) //distí´ë”ë¡œ ì´ë™
    .pipe(connect.reload());
}

//5. ì‘ì—…ì‹¤í–‰
exports.default = parallel(
    series(clean, sassTask, ejsTask, connectServer), // sassTask, ejsTask í•¨ìˆ˜ ì¶”ê°€
    watchFile
);
```

`sassTask`ì™€ `ejsTask`ë¥¼ í•¨ìˆ˜ë¡œ ì‘ì„±í•˜ê³  í•´ë‹¹ taskë“¤ì„ seriesì™€ watchFile ë‚´ë¶€ì— ì‘ì„±í•˜ì—¬,

íŒŒì¼ ë³€ê²½ ì‹œ, ë¡œì»¬ ì„œë²„ì—ì„œ ìƒˆë¡œ ê³ ì¹¨í•˜ë©´ ë³€ê²½ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆê²Œ í–ˆìŠµë‹ˆë‹¤.

Webpackê³¼ ë‹¬ë¦¬, ì›í•˜ëŠ” ì‘ì—…ì„ í•¨ìˆ˜ë¡œ ì‘ì„±í•˜ê³  í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### src í•¨ìˆ˜

- Taskë¥¼ ìˆ˜í–‰í•  í´ë”ë¥¼ ì§€ì¹­í•˜ëŠ” gulp ë‚´ì¥ í•¨ìˆ˜ì…ë‹ˆë‹¤. pipeë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ìˆ˜í–‰í•©ë‹ˆë‹¤.

### pipe í•¨ìˆ˜

- Taskë¥¼ ì—°ê²°í•˜ëŠ” í•¨ìˆ˜ ì²´ì´ë‹ì…ë‹ˆë‹¤. ì›í•˜ëŠ” ì‘ì—…ì„ pipe í•¨ìˆ˜ ì²´ì¸ìœ¼ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.

### dest í•¨ìˆ˜

- Taskë¥¼ ë§ˆì¹œ ouputì´ ì €ì¥ë  í´ë”ì…ë‹ˆë‹¤. ë³´í†µ ê°€ì¥ ë§ˆì§€ë§‰ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

<br/>

## ì›í•˜ëŠ” Taskë¥¼ ì¶”ê°€í•˜ì—¬, ë¹Œë“œ ìë™í™”ë¥¼ êµ¬ì¶•í•´ë´…ì‹œë‹¤.

<hr/>

gulpëŠ” ì´ì „ ë²„ì „ë¶€í„° Webpackì—ì„œ êµ¬í˜„ì´ ì˜ ë˜ì§€ì•ŠëŠ” image sprite ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì˜ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

image sprite, svg spriteë“± ì›í•˜ëŠ” ì‘ì—…ì„ ì¶”ê°€í•˜ì—¬, Html ë²ˆë“¤ëŸ¬ëŠ” ë‚˜ì˜ ì—…ë¬´ì— ë§ê²Œ í™œìš©í•´ ë´…ì‹œë‹¤.

ê·¸ëŸ¼ 20,000

<br/>

## Gulp í™ˆí˜ì´ì§€

<hr/>

ğŸ‘‰ [ë§í¬] (https://gulpjs.com/)